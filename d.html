<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Card Sorting</title>
    <link rel="stylesheet" href="d.css">
    <script src="html2canvas.js"></script>
</head>
<body>

  <p style="background-color: lightgray; padding: 10px; border-radius: 5px; margin-bottom: 20px;">
    Organiza los recuadros según cómo te gustaría que se vieran en una aplicación de teléfono.
  </p>
  <div id="sortable-container">
      <!-- Aquí se generarán las tarjetas -->
  </div>

  <button id="save-btn">Guardar</button>

  <script>
      // Crear tarjetas para cada funcionalidad
      const functionalities = [
          "Registro e inicio de sesión",
          "Rol de Usuario",
          "Búsqueda",
          "Reserva de actividades",
          "Calendario Interactivo",
          "Información",
          "Notificaciones",
          "Ubicación y Plano",
          "Carrito de compra",
          "Ayuda",
          "Feedback",
          "Sugerencias",
          "Perfil de Usuario",
          "Ajustes",
          "Menú",
          "Invitar"
      ];

      const sortableContainer = document.getElementById('sortable-container');
      const saveBtn = document.getElementById('save-btn');

      function createCard(content) {
          const card = document.createElement('div');
          card.classList.add('card');
          card.textContent = content;
          return card;
      }

      function initSortable() {
          const cards = document.querySelectorAll('.card');
          cards.forEach(card => {
              card.addEventListener('mousedown', function(event) {
                  let shiftX = event.clientX - card.getBoundingClientRect().left;
                  let shiftY = event.clientY - card.getBoundingClientRect().top;

                  card.style.position = 'absolute';
                  card.style.zIndex = 1000;

                  document.body.append(card);

                  moveAt(event.pageX, event.pageY);

                  function moveAt(pageX, pageY) {
                      card.style.left = pageX - shiftX + 'px';
                      card.style.top = pageY - shiftY + 'px';
                  }

                  function onMouseMove(event) {
                      moveAt(event.pageX, event.pageY);
                  }

                  document.addEventListener('mousemove', onMouseMove);

                  card.onmouseup = function() {
                      document.removeEventListener('mousemove', onMouseMove);
                      card.onmouseup = null;
                  };
              });

              card.ondragstart = function() {
                  return false;
              };
          });
      }

      function saveAndCapture() {
          html2canvas(document.body, {
              scrollY: -window.scrollY
          }).then(canvas => {
              const imgData = canvas.toDataURL('image/png');
              const link = document.createElement('a');
              link.href = imgData;
              link.download = 'captura.png';
              document.body.appendChild(link);
              link.click();
              document.body.removeChild(link);
          });
      }

      function init() {
          functionalities.forEach(func => {
              const card = createCard(func);
              sortableContainer.appendChild(card);
          });

          initSortable();
          saveBtn.addEventListener('click', saveAndCapture);
      }

      init();
  </script>
</body>
</html>